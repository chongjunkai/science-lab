<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Science Lab Simulator</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        #gameContainer {
            background: white;
            border-radius: 20px;
            padding: 30px;
            max-width: 900px;
            width: 100%;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }
        
        h1 {
            text-align: center;
            color: #1e3c72;
            margin-bottom: 10px;
            font-size: 36px;
        }
        
        #levelInfo {
            text-align: center;
            color: #666;
            margin-bottom: 20px;
            font-size: 18px;
        }
        
        #objective {
            background: #f0f8ff;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 4px solid #2a5298;
        }
        
        #objective h3 {
            color: #1e3c72;
            margin-bottom: 5px;
        }
        
        #labArea {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        #chemicals {
            flex: 1;
            background: #f9f9f9;
            padding: 20px;
            border-radius: 10px;
        }
        
        #chemicals h3 {
            color: #1e3c72;
            margin-bottom: 15px;
        }
        
        .chemical {
            background: white;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            cursor: pointer;
            border: 2px solid transparent;
            transition: all 0.3s;
        }
        
        .chemical:hover {
            border-color: #2a5298;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        
        .chemical.selected {
            border-color: #4CAF50;
            background: #e8f5e9;
        }
        
        .chemical-name {
            font-weight: bold;
            color: #1e3c72;
            margin-bottom: 5px;
        }
        
        .chemical-formula {
            color: #666;
            font-size: 14px;
        }
        
        #beaker {
            flex: 1;
            background: linear-gradient(to bottom, #fff 0%, #f0f0f0 100%);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            position: relative;
            min-height: 300px;
        }
        
        #beaker h3 {
            color: #1e3c72;
            margin-bottom: 15px;
        }
        
        #beakerVisual {
            width: 150px;
            height: 200px;
            margin: 0 auto 20px;
            position: relative;
            border: 3px solid #333;
            border-top: none;
            border-radius: 0 0 20px 20px;
            background: white;
            overflow: hidden;
        }
        
        #liquid {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 0%;
            background: #87CEEB;
            transition: all 0.5s ease;
        }
        
        #bubbles {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }
        
        .bubble {
            position: absolute;
            bottom: 0;
            width: 10px;
            height: 10px;
            background: rgba(255, 255, 255, 0.6);
            border-radius: 50%;
            animation: rise 2s ease-in infinite;
        }
        
        @keyframes rise {
            0% {
                bottom: 0;
                opacity: 1;
            }
            100% {
                bottom: 100%;
                opacity: 0;
            }
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0) rotate(0deg); }
            25% { transform: translateX(-5px) rotate(-2deg); }
            75% { transform: translateX(5px) rotate(2deg); }
        }
        
        @keyframes glow {
            0%, 100% { box-shadow: 0 0 10px rgba(74, 144, 226, 0.5); }
            50% { box-shadow: 0 0 25px rgba(74, 144, 226, 0.8); }
        }
        
        .mixing {
            animation: shake 0.3s ease-in-out 5, glow 1.5s ease-in-out 1;
        }
        
        @keyframes sparkle {
            0% { transform: scale(0) rotate(0deg); opacity: 1; }
            50% { transform: scale(1.5) rotate(180deg); opacity: 0.8; }
            100% { transform: scale(0) rotate(360deg); opacity: 0; }
        }
        
        .sparkle {
            position: absolute;
            width: 20px;
            height: 20px;
            background: radial-gradient(circle, #FFD700, transparent);
            border-radius: 50%;
            pointer-events: none;
            animation: sparkle 1s ease-out forwards;
        }
        
        #mixedChemicals {
            margin-bottom: 15px;
            min-height: 40px;
        }
        
        .mixed-item {
            display: inline-block;
            background: #e3f2fd;
            padding: 5px 10px;
            margin: 3px;
            border-radius: 5px;
            font-size: 14px;
            color: #1e3c72;
        }
        
        #buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 20px;
        }
        
        button {
            padding: 12px 25px;
            font-size: 16px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
        }
        
        #mixBtn {
            background: #4CAF50;
            color: white;
        }
        
        #mixBtn:hover {
            background: #45a049;
            transform: translateY(-2px);
        }
        
        #clearBtn {
            background: #f44336;
            color: white;
        }
        
        #clearBtn:hover {
            background: #da190b;
            transform: translateY(-2px);
        }
        
        #result {
            margin-top: 20px;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            font-size: 18px;
            font-weight: bold;
            min-height: 50px;
        }
        
        .success {
            background: #d4edda;
            color: #155724;
            border: 2px solid #c3e6cb;
        }
        
        .error {
            background: #f8d7da;
            color: #721c24;
            border: 2px solid #f5c6cb;
        }
        
        .info {
            background: #d1ecf1;
            color: #0c5460;
            border: 2px solid #bee5eb;
        }
        
        #nextLevelBtn {
            background: #2196F3;
            color: white;
            margin-top: 15px;
            display: none;
        }
        
        #nextLevelBtn:hover {
            background: #0b7dda;
        }
        
        #score {
            text-align: center;
            font-size: 20px;
            color: #1e3c72;
            margin-bottom: 20px;
            font-weight: bold;
        }
        
        .equation {
            font-family: 'Courier New', monospace;
            background: #f0f0f0;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div id="gameContainer">
        <h1>üß™ Science Lab Simulator üß™</h1>
        <div id="score">Score: <span id="scoreValue">0</span></div>
        <div id="levelInfo">Level <span id="currentLevel">1</span> of <span id="totalLevels">5</span></div>
        
        <div id="objective">
            <h3>üéØ Objective:</h3>
            <p id="objectiveText">Mix the correct chemicals to create water (H‚ÇÇO)</p>
        </div>
        
        <div id="labArea">
            <div id="chemicals">
                <h3>Available Chemicals:</h3>
                <div id="chemicalsList"></div>
            </div>
            
            <div id="beaker">
                <h3>Mixing Beaker</h3>
                <div id="beakerVisual">
                    <div id="liquid"></div>
                    <div id="bubbles"></div>
                </div>
                <div id="mixedChemicals">
                    <em>Click chemicals to add them here</em>
                </div>
                <div id="buttons">
                    <button id="mixBtn">Mix Chemicals</button>
                    <button id="clearBtn">Clear Beaker</button>
                </div>
            </div>
        </div>
        
        <div id="result"></div>
        <div style="text-align: center;">
            <button id="nextLevelBtn">Next Level ‚Üí</button>
        </div>
    </div>

    <script>
        let currentLevel = 1;
        let score = 0;
        let selectedChemicals = [];
        
        const levels = [
            {
                objective: "Create water (H‚ÇÇO) by mixing hydrogen and oxygen",
                chemicals: [
                    { name: "Hydrogen", formula: "H‚ÇÇ", color: "#FFE4E1" },
                    { name: "Oxygen", formula: "O‚ÇÇ", color: "#ADD8E6" },
                    { name: "Nitrogen", formula: "N‚ÇÇ", color: "#E6E6FA" }
                ],
                solution: ["H‚ÇÇ", "H‚ÇÇ", "O‚ÇÇ"],
                product: "Water (H‚ÇÇO)",
                explanation: "2H‚ÇÇ + O‚ÇÇ ‚Üí 2H‚ÇÇO - Two hydrogen molecules react with one oxygen molecule to form water!",
                points: 100
            },
            {
                objective: "Create table salt (NaCl) by mixing sodium and chlorine",
                chemicals: [
                    { name: "Sodium", formula: "Na", color: "#FFD700" },
                    { name: "Chlorine", formula: "Cl‚ÇÇ", color: "#90EE90" },
                    { name: "Potassium", formula: "K", color: "#DDA0DD" }
                ],
                solution: ["Na", "Na", "Cl‚ÇÇ"],
                product: "Table Salt (NaCl)",
                explanation: "2Na + Cl‚ÇÇ ‚Üí 2NaCl - Sodium and chlorine react to form common table salt!",
                points: 150
            },
            {
                objective: "Create carbon dioxide (CO‚ÇÇ) by burning carbon in oxygen",
                chemicals: [
                    { name: "Carbon", formula: "C", color: "#808080" },
                    { name: "Oxygen", formula: "O‚ÇÇ", color: "#ADD8E6" },
                    { name: "Hydrogen", formula: "H‚ÇÇ", color: "#FFE4E1" },
                    { name: "Nitrogen", formula: "N‚ÇÇ", color: "#E6E6FA" }
                ],
                solution: ["C", "O‚ÇÇ"],
                product: "Carbon Dioxide (CO‚ÇÇ)",
                explanation: "C + O‚ÇÇ ‚Üí CO‚ÇÇ - Carbon burns in oxygen to produce carbon dioxide!",
                points: 200
            },
            {
                objective: "Create ammonia (NH‚ÇÉ) by combining nitrogen and hydrogen",
                chemicals: [
                    { name: "Nitrogen", formula: "N‚ÇÇ", color: "#E6E6FA" },
                    { name: "Hydrogen", formula: "H‚ÇÇ", color: "#FFE4E1" },
                    { name: "Oxygen", formula: "O‚ÇÇ", color: "#ADD8E6" },
                    { name: "Chlorine", formula: "Cl‚ÇÇ", color: "#90EE90" }
                ],
                solution: ["N‚ÇÇ", "H‚ÇÇ", "H‚ÇÇ", "H‚ÇÇ"],
                product: "Ammonia (NH‚ÇÉ)",
                explanation: "N‚ÇÇ + 3H‚ÇÇ ‚Üí 2NH‚ÇÉ - Nitrogen and hydrogen combine under pressure to form ammonia!",
                points: 250
            },
            {
                objective: "Create methane (CH‚ÇÑ) by combining carbon and hydrogen",
                chemicals: [
                    { name: "Carbon", formula: "C", color: "#808080" },
                    { name: "Hydrogen", formula: "H‚ÇÇ", color: "#FFE4E1" },
                    { name: "Oxygen", formula: "O‚ÇÇ", color: "#ADD8E6" },
                    { name: "Nitrogen", formula: "N‚ÇÇ", color: "#E6E6FA" },
                    { name: "Chlorine", formula: "Cl‚ÇÇ", color: "#90EE90" }
                ],
                solution: ["C", "H‚ÇÇ", "H‚ÇÇ"],
                product: "Methane (CH‚ÇÑ)",
                explanation: "C + 2H‚ÇÇ ‚Üí CH‚ÇÑ - Carbon and hydrogen combine to form methane, the main component of natural gas!",
                points: 300
            }
        ];
        
        function loadLevel(level) {
            const levelData = levels[level - 1];
            currentLevel = level;
            selectedChemicals = [];
            
            document.getElementById('currentLevel').textContent = level;
            document.getElementById('totalLevels').textContent = levels.length;
            document.getElementById('objectiveText').textContent = levelData.objective;
            document.getElementById('result').textContent = '';
            document.getElementById('result').className = '';
            document.getElementById('nextLevelBtn').style.display = 'none';
            
            // Load chemicals
            const chemicalsList = document.getElementById('chemicalsList');
            chemicalsList.innerHTML = '';
            
            levelData.chemicals.forEach(chem => {
                const chemDiv = document.createElement('div');
                chemDiv.className = 'chemical';
                chemDiv.innerHTML = `
                    <div class="chemical-name">${chem.name}</div>
                    <div class="chemical-formula">${chem.formula}</div>
                `;
                chemDiv.style.borderLeft = `5px solid ${chem.color}`;
                chemDiv.onclick = () => addChemical(chem);
                chemicalsList.appendChild(chemDiv);
            });
            
            updateBeaker();
        }
        
        function addChemical(chem) {
            selectedChemicals.push(chem);
            updateBeaker();
        }
        
        function updateBeaker() {
            const mixedDiv = document.getElementById('mixedChemicals');
            
            if (selectedChemicals.length === 0) {
                mixedDiv.innerHTML = '<em>Click chemicals to add them here</em>';
            } else {
                mixedDiv.innerHTML = '';
                selectedChemicals.forEach((chem, index) => {
                    const item = document.createElement('span');
                    item.className = 'mixed-item';
                    item.textContent = chem.formula;
                    item.style.background = chem.color;
                    mixedDiv.appendChild(item);
                });
            }
            
            // Update liquid level and color
            const liquid = document.getElementById('liquid');
            if (selectedChemicals.length > 0) {
                liquid.style.height = Math.min(selectedChemicals.length * 20, 100) + '%';
                // Mix colors
                if (selectedChemicals.length === 1) {
                    liquid.style.background = selectedChemicals[0].color;
                } else {
                    liquid.style.background = 'linear-gradient(to bottom, ' + 
                        selectedChemicals.map(c => c.color).join(', ') + ')';
                }
            } else {
                liquid.style.height = '0%';
            }
        }
        
        function clearBeaker() {
            selectedChemicals = [];
            updateBeaker();
            document.getElementById('result').textContent = '';
            document.getElementById('result').className = '';
        }
        
        function mixChemicals() {
            if (selectedChemicals.length === 0) {
                showResult('Please add chemicals to the beaker first!', 'info');
                return;
            }
            
            // Start mixing animation
            const beaker = document.getElementById('beakerVisual');
            const liquid = document.getElementById('liquid');
            const bubblesContainer = document.getElementById('bubbles');
            
            beaker.classList.add('mixing');
            
            // Create bubbles
            bubblesContainer.innerHTML = '';
            for (let i = 0; i < 15; i++) {
                setTimeout(() => {
                    const bubble = document.createElement('div');
                    bubble.className = 'bubble';
                    bubble.style.left = Math.random() * 90 + '%';
                    bubble.style.animationDelay = Math.random() * 0.5 + 's';
                    bubble.style.width = Math.random() * 8 + 5 + 'px';
                    bubble.style.height = bubble.style.width;
                    bubblesContainer.appendChild(bubble);
                }, i * 50);
            }
            
            // Wait for animation to complete
            setTimeout(() => {
                beaker.classList.remove('mixing');
                bubblesContainer.innerHTML = '';
                
                const levelData = levels[currentLevel - 1];
                const selected = selectedChemicals.map(c => c.formula).sort();
                const solution = [...levelData.solution].sort();
                
                if (JSON.stringify(selected) === JSON.stringify(solution)) {
                    // Success! Change liquid color
                    liquid.style.background = getResultColor(levelData.product);
                    
                    // Create sparkles
                    createSparkles(beaker);
                    
                    score += levelData.points;
                    document.getElementById('scoreValue').textContent = score;
                    
                    setTimeout(() => {
                        showResult(
                            `‚úÖ Success! You created ${levelData.product}!<br>` +
                            `<div class="equation">${levelData.explanation}</div>` +
                            `<div>+${levelData.points} points!</div>`,
                            'success'
                        );
                        
                        if (currentLevel < levels.length) {
                            document.getElementById('nextLevelBtn').style.display = 'inline-block';
                        } else {
                            document.getElementById('result').innerHTML += 
                                '<br><strong>üéâ Congratulations! You completed all levels! üéâ</strong>' +
                                '<br>Final Score: ' + score + ' points';
                        }
                    }, 500);
                } else {
                    // Failure - darken liquid
                    liquid.style.background = '#8B4513';
                    
                    setTimeout(() => {
                        showResult(
                            '‚ùå That combination doesn\'t work! Try a different mixture.',
                            'error'
                        );
                    }, 300);
                }
            }, 1500);
        }
        
        function getResultColor(product) {
            const colors = {
                'Water (H‚ÇÇO)': 'linear-gradient(to bottom, #E3F2FD, #90CAF9)',
                'Table Salt (NaCl)': 'linear-gradient(to bottom, #FFF9C4, #FFFFFF)',
                'Carbon Dioxide (CO‚ÇÇ)': 'linear-gradient(to bottom, #E0E0E0, #BDBDBD)',
                'Ammonia (NH‚ÇÉ)': 'linear-gradient(to bottom, #F3E5F5, #E1BEE7)',
                'Methane (CH‚ÇÑ)': 'linear-gradient(to bottom, #FFF3E0, #FFE0B2)'
            };
            return colors[product] || '#90CAF9';
        }
        
        function createSparkles(container) {
            for (let i = 0; i < 8; i++) {
                setTimeout(() => {
                    const sparkle = document.createElement('div');
                    sparkle.className = 'sparkle';
                    sparkle.style.left = Math.random() * 80 + 10 + '%';
                    sparkle.style.top = Math.random() * 80 + 10 + '%';
                    container.appendChild(sparkle);
                    
                    setTimeout(() => sparkle.remove(), 1000);
                }, i * 100);
            }
        }
        
        function showResult(message, type) {
            const result = document.getElementById('result');
            result.innerHTML = message;
            result.className = type;
        }
        
        function nextLevel() {
            if (currentLevel < levels.length) {
                loadLevel(currentLevel + 1);
            }
        }
        
        document.getElementById('mixBtn').onclick = mixChemicals;
        document.getElementById('clearBtn').onclick = clearBeaker;
        document.getElementById('nextLevelBtn').onclick = nextLevel;
        
        // Start the game
        loadLevel(1);
    </script>
</body>
</html>
